<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" MadCap:lastBlockDepth="6" MadCap:lastHeight="1024" MadCap:lastWidth="1159">
    <head>
        <link href="../Resources/TableStyles/Tip.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>Audited Database Properties Window Before After Data</title>
        <link href="../Resources/Stylesheets/Idera Stylesheet.css" rel="stylesheet" />
    </head>
    <body>
        <h1 class="Heading1" MadCap:conditions="Default.ScreenOnly">Audited Database Properties Window</h1>
        <h2 class="Heading2">
            <MadCap:conditionalText MadCap:conditions="Default.PrintOnly">Audited Database Properties Window &gt; </MadCap:conditionalText>Before-After Data</h2>
        <p class="Body">
            <MadCap:keyword term="Before-After data;auditing:before-after data" />This tab allows you to select the tables for which you want to collect before and after data. You can collect before and after data for DML events generated by DELETE, INSERT, and UPDATE commands.</p>
        <table class="TableStyle_Tip" style="mc-table-style: url('../Resources/TableStyles/Tip.css');" cellspacing="0">
            <tbody>
                <tr>
                    <td class="TableStyle_Tip_Body_0_0_RowEnd_ColSep">
                        <p>TIP</p>
                    </td>
                    <td class="TableStyle_Tip_Body_0_1_RowEnd_ColEnd">
                        <p class="TableText">It is important to note that the Before-After Data capture feature modifies the application schema by creating triggers on any table for which such data collection is enabled.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="Body">Collect before and after data when it is critical to capture the exact data change in a table column. When this feature is enabled, you can evaluate the before value and after value for each change in the Audit Events view. Enabling this feature can impact your Collection Server and Management Console performance.</p>
        <p class="Body"><span class="If_Then_Statement">If you want to collect before and after data</span>, verify that you are auditing DML events on this database and that common language runtime (CLR) is enabled on the corresponding SQL Server instance. <span class="If_Then_Statement">If the target database uses SQL Server replication</span>, do not enable before-after auditing. Before and after data collection does not support SQL Server replication. For more information, see Microsoft Books Online.</p>
        <table class="TableStyle_Tip" style="mc-table-style: url('../Resources/TableStyles/Tip.css');" cellspacing="0">
            <tbody>
                <tr>
                    <td class="TableStyle_Tip_Body_0_0_RowEnd_ColSep">
                        <p>TIP</p>
                    </td>
                    <td class="TableStyle_Tip_Body_0_1_RowEnd_ColEnd">
                        <p class="TableText">To successfully audit specific columns on a table, ensure the table name does not contain the following special characters:&#160;\ / : * ? " |</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 class="Heading2">Available actions</h2>
        <p class="DefinitionListTerm">Specify tables for before and after data collection</p>
        <p class="DefinitionListBody">Use <span class="GUI_Item">Add and Remove</span> to specify the tables for which you want to collect before and after data.</p>
        <p class="DefinitionListTerm">Specify which columns to audit</p>
        <p class="DefinitionListBody">Use <span class="GUI_Item">Edit </span>to specify which columns you want to audit. You can audit all columns or individual columns that do not contain BLOB&#160;data. </p>
        <p class="DefinitionListTerm">Select the maximum number of rows to collect</p>
        <p class="DefinitionListBody">Use <span class="GUI_Item">Edit</span> to select the number of rows per transaction that you want to audit from this table. For example, if you select 100 rows, the SQLcompliance Agent will capture the first 100 rows of each DML transaction, and collect all column updates for each captured row. By default, the first 10 rows per DML&#160;transaction are captured.</p>
        <p class="DefinitionListTerm">Enable Now</p>
        <p class="DefinitionListBody">Allows you to enable CLR on the instance hosting this database.</p>
        <p class="DefinitionListBody">CLR is required by .NET Framework to access details about DML events on the SQL Server database. For more information, see Microsoft Books Online.</p>
        <h2 class="Heading2">Available fields</h2>
        <p class="DefinitionListTerm">Table Name</p>
        <p class="DefinitionListBody">Provides the name of the table you are auditing on this database.</p>
        <p class="DefinitionListTerm">Maximum Rows</p>
        <p class="DefinitionListBody">Provides the maximum number of rows that the SQLcompliance Agent will capture of each DML transaction.</p>
        <p class="DefinitionListTerm">Columns</p>
        <p class="DefinitionListBody">Indicates the status of the columns associated with the audited tables. Typically, this field will display <span class="GUI_Item">All Columns</span> or list the individual columns that are being audited for before and after data.</p>
        <p class="DefinitionListBody"><span class="If_Then_Statement">If the audited table contains BLOB&#160;data and individual columns have not yet been selected</span>, the status will display as <span class="GUI_Item">Not Configured</span>. SQL&#160;Compliance Manager does not support auditing  BLOB&#160;data. To audit data changes on this table, click <span class="GUI_Item">Edit </span>and then choose the available columns that do not contain BLOB&#160;data.</p>
        <h2 class="Heading2">Set up auditing before and after data</h2>
        <p class="Body">Auditing before and after data is an extension of DML event auditing at the table column level. </p>
        <ol>
            <li class="NumberedList">Ensure Database Modification (DML)&#160;activity is selected on the Audited Activities tab.</li>
            <li class="NumberedList">Ensure the appropriate tables are specified on the <a href="Database Properties DML Select.htm" target="_self">DML/SELECT&#160;Filters tab</a>.</li>
            <li class="NumberedList">On the Before-After Data tab, click <span class="GUI_Item">Add </span>to choose which audited tables should also be audited at the column level for before and after data.</li>
            <li class="NumberedList">Choose the appropriate tables, and then click <span class="GUI_Item">OK</span>. By default, all columns are audited.</li>
            <li class="NumberedList"><span class="If_Then_Statement">If you want to audit specific columns</span>, select the table, and then click <span class="GUI_Item">Edit</span>.</li>
        </ol>
    </body>
</html>